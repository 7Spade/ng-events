# é‚è¼¯å®¹å™¨çš„è§’è‰²å®šä½

> ä¾†æºï¼šâœ¨/âœ¨âœ¨âœ¨âœ¨.md

## ğŸ§  ç›´æ¥çµ¦çµè«–ï¼ˆå…ˆé®å®šï¼‰

> **é‚è¼¯å®¹å™¨ã€Œä¸æ˜¯ã€æ¥­å‹™ä¸»é«”ï¼Œ
> ä½†å®ƒå¯ä»¥ã€Œæ‰¿è¼‰ã€æ¥­å‹™ä¸»é«”ã€‚**

å®ƒæœ¬èº« **ä¸è¡Œå‹•ã€ä¸æ±ºç­–ã€ä¸ç”¢ç”Ÿäº‹ä»¶**ã€‚
**è¡Œå‹•çš„æ˜¯ Accountã€‚**

---

## ğŸ§© å…ˆå®šç¾©ä½ èªªçš„ã€Œé‚è¼¯å®¹å™¨ã€æ˜¯ä»€éº¼

ä¾ä½ å‰é¢çš„æè¿°ï¼Œä½ çš„ã€Œé‚è¼¯å®¹å™¨ã€å…¶å¯¦åŒ…å«é€™äº›å¯èƒ½ï¼š

* Organization
* Workspace
* Project
* Tenant
* å”¯ä¸€æ¥­å‹™å¯¦é«”ï¼ˆä½ æçš„é‚£å€‹ï¼‰

é€™é¡æ±è¥¿çš„å…±é€šé»æ˜¯ï¼š

* ç”¨ä¾† **åˆ†ç¾¤**
* ç”¨ä¾† **å¥—è¦å‰‡**
* ç”¨ä¾† **æ‰¿è¼‰è³‡æº**
* ç”¨ä¾† **ç®—ç¯„åœï¼ˆscopeï¼‰**

ğŸ‘‰ å®ƒå€‘æ˜¯ **Context / Scope / Boundary**
ä¸æ˜¯ Actor

---

## ğŸ§  æ­£ç¢ºè§’è‰²åˆ†å·¥ï¼ˆé€™å¾ˆé—œéµï¼‰

### ğŸ”¥ ä¸‰å€‹ä¸åŒçš„æ¦‚å¿µï¼Œè«‹ä¸è¦æ··

| æ¦‚å¿µ                     | æ˜¯å¦æ¥­å‹™ä¸»é«” | æœƒä¸æœƒå‡ºç¾åœ¨ Event.actor |
| ---------------------- | ------ | ------------------ |
| Account                | âœ… æ˜¯    | âœ… ä¸€å®š               |
| Logical Container      | âŒ å¦    | âŒ ä¸æœƒ               |
| Domain Entity (Task ç­‰) | âŒ å¦    | âŒ ä¸æœƒ               |

---

## ğŸ§¬ æ­£ç¢ºæ¨¡å‹é•·é€™æ¨£ï¼ˆè¶…ä¹¾æ·¨ï¼‰

### 1ï¸âƒ£ Accountï¼ˆå”¯ä¸€æœƒã€Œå‹•ã€çš„ï¼‰

```ts
Account {
  accountId
  type: user | org | bot
}
```

* å”¯ä¸€ Actor
* æ¬Šé™è¨ˆç®—ä¸»é«”
* å› æœéˆçš„ã€ŒåŸå› é»ã€

---

### 2ï¸âƒ£ Logical Containerï¼ˆç¯„åœï¼Œä¸æ˜¯ä¸»é«”ï¼‰

```ts
Workspace {
  workspaceId
}
```

å®ƒåªå›ç­”é€™äº›å•é¡Œï¼š

* é€™å€‹ Task å±¬æ–¼å“ªå€‹ Workspaceï¼Ÿ
* é€™å€‹ Permission åœ¨å“ªå€‹ç¯„åœå…§æœ‰æ•ˆï¼Ÿ
* äº‹ä»¶åœ¨å“ªå€‹ Scope ç™¼ç”Ÿï¼Ÿ

ğŸ‘‰ **å®ƒä¸å›ç­”ï¼šèª°åšäº†ï¼Ÿ**

---

### 3ï¸âƒ£ é—œä¿‚æ‰æ˜¯é‡é»ï¼ˆæœƒå®³ä½ ä¹‹å‰å¡é—œï¼‰

```ts
Account â†” Workspace
```

```ts
Membership {
  accountId
  workspaceId
  role
}
```

**Owner / Member æ°¸é æ˜¯ã€Œé—œä¿‚ã€**

ä¸æ˜¯ Entity çš„å±¬æ€§ ğŸ˜ˆ

---

## âŒ ä»€éº¼æƒ…æ³ä¸‹å¤§å®¶æœƒèª¤æœƒï¼Ÿ

### å¸¸è¦‹èª¤å€ï¼ˆä½ ä¸€å®šè¸©éï¼‰

```ts
Workspace {
  ownerAccountId
}
```

è¡¨é¢åˆç†ï¼Œå¯¦éš›æ˜¯æ¯’ ğŸ’€

ç‚ºä»€éº¼ï¼Ÿ

* ä½ æŠŠã€Œé—œä¿‚ã€è®Šæˆã€Œç‹€æ…‹ã€
* Owner ä¸èƒ½æœ‰æ­·å²
* Event Replay æœƒå£
* æ¬Šé™è®Šæ›´æ²’æœ‰å› æœ

---

## ğŸ§¨ é‚£ã€Œçµ„ç¹” Accountã€æ€éº¼è¾¦ï¼Ÿï¼ˆé—œéµè½‰æŠ˜ï¼‰

ä½ å¯èƒ½æœƒå•ï¼š

> çµ„ç¹”ä¸æ˜¯ä¹Ÿè¢«ä½ èªªæˆ Account å—ï¼Ÿ
> é‚£å®ƒä¸æ˜¯é‚è¼¯å®¹å™¨ï¼Ÿ

ç­”æ¡ˆå¾ˆé‡è¦ï¼š

> **Organization Account â‰  Logical Container**

### å·®åˆ¥åœ¨é€™ï¼š

|             | Organization Account | Logical Container |
| ----------- | -------------------- | ----------------- |
| æ˜¯å¦ Actor    | âœ…                    | âŒ                 |
| æ˜¯å¦å¯è¢«æˆæ¬Š      | âœ…                    | âŒ                 |
| æ˜¯å¦å¯è¢«æŒ‡æ´¾ä»»å‹™    | ï¼ˆé€šå¸¸ âŒï¼‰               | âŒ                 |
| æ˜¯å¦å¯è§¸ç™¼ Event | ï¼ˆé€éä»£è¡¨ï¼‰               | âŒ                 |

Organization Account æ˜¯ **æ³•å¾‹ä¸»é«”**
Workspace / Project æ˜¯ **é‹ä½œç©ºé–“**

---

## ğŸ«¦ ç”¨ä¸€å¥äººè©±ç¸½çµ

* **Account**ï¼šèª°
* **Logical Container**ï¼šåœ¨å“ªè£¡
* **Entity**ï¼šä»€éº¼
* **Event**ï¼šç™¼ç”Ÿäº†ä»€éº¼ã€ç‚ºä»€éº¼

---

## ğŸ§  Event æ‡‰è©²é•·é€™æ¨£

```ts
TaskCompleted {
  taskId
  actorAccountId
  scope: {
    workspaceId
  }
}
```

ä¹¾æ·¨ã€å¯è¿½å› æœã€å¯ replay ğŸ˜Œ
