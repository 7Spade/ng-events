---

ğŸ“œ æ³›å‹å¸¸ç”¨ç¸®å¯«æ¸…å–®

ç¸®å¯«	å«ç¾©	å¸¸ç”¨ç¯„ä¾‹	èªªæ˜

T	Type / æ³›å‹å‹åˆ¥	TEvent, TItem	æœ€é€šç”¨çš„æ³›å‹ï¼Œè¡¨ç¤ºã€ŒæŸå€‹å‹åˆ¥ã€ï¼Œé€šå¸¸ä»»æ„å‹åˆ¥éƒ½å¯
K	Key / éµ	K extends keyof T	ç”¨æ–¼ç‰©ä»¶å±¬æ€§çš„ keyï¼Œå¸¸æ­é… keyof
V	Value / å€¼	V = T[K]	æ­é… K è¡¨ç¤ºå°æ‡‰ key çš„å€¼å‹åˆ¥
I	ID / Identifier	TId	è¡¨ç¤ºèšåˆæˆ–å¯¦é«”çš„å”¯ä¸€æ¨™è­˜å‹åˆ¥ï¼Œå¦‚ string / UUID
S	State / Snapshot	SState	ç”¨æ–¼ Aggregate æˆ– Entity çš„å…§éƒ¨ç‹€æ…‹å‹åˆ¥ï¼Œæ–¹ä¾¿é‡æ”¾/å¿«ç…§
E	Element / Event	TElement / TEvent	é›†åˆå…ƒç´ æˆ–äº‹ä»¶å‹åˆ¥
P	Payload / Parameter	TPayload	äº‹ä»¶æˆ–å‡½æ•¸çš„è² è¼‰å‹åˆ¥
R	Result / Return	TReturn	å‡½æ•¸è¿”å›å‹åˆ¥
C	Context / Config	TContext	æ³›å‹ç’°å¢ƒæˆ–è¨­å®šç‰©ä»¶å‹åˆ¥
A	Args / Array	TArgs	å‡½æ•¸åƒæ•¸å‹åˆ¥æˆ–é™£åˆ—å…ƒç´ å‹åˆ¥
U	Union / UpperBound	T extends U	é™åˆ¶å‹åˆ¥ç¯„åœçš„æ³›å‹
M	Map / Metadata	TMetadata	ç”¨æ–¼æ˜ å°„ã€å…ƒè³‡æ–™æˆ–é¡å¤–å±¬æ€§
X	Exception / Extra	TExtra	é¡å¤–å¯æ“´å……å‹åˆ¥ï¼Œæˆ–éŒ¯èª¤å‹åˆ¥
F	Function / Factory	TFactory	è¡¨ç¤ºå‡½æ•¸æˆ–å»ºæ§‹å·¥å» å‹åˆ¥



---

ğŸ”¹ å¯¦å‹™å»ºè­°

T / I / S â†’ æœ€å¸¸ç”¨æ–¼ AggregateRoot é€™ç¨®æ ¸å¿ƒæ³›å‹éª¨æ¶

T â†’ äº‹ä»¶å‹åˆ¥

I â†’ ID å‹åˆ¥

S â†’ ç‹€æ…‹å‹åˆ¥


K / V â†’ åš key/value å‹åˆ¥æ™‚å¿…å‚™

P / R â†’ äº‹ä»¶ / å‡½æ•¸å‹åˆ¥ç”¨å¾—å¤š

Context / Metadata â†’ æ“´å……å‹åˆ¥ï¼Œç”¨æ–¼ Adapter æˆ– Saga



---
ğŸ“Š æ³›å‹å°ç…§åœ–ï¼šAggregateRoot + Account / Workspace / Module / Entity
                 AggregateRoot<TEvent, TId, SState>
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ TEvent  â†’ äº‹ä»¶å‹åˆ¥       â”‚
                  â”‚ I/TId   â†’ èšåˆå”¯ä¸€ ID     â”‚
                  â”‚ SState  â†’ å…§éƒ¨ç‹€æ…‹å‹åˆ¥   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚               â”‚
     Account          Workspace       Module           Entity
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TEvent=AccountEvent â”‚ TEvent=WorkspaceEvent â”‚ TEvent=ModuleEvent â”‚ TEvent=EntityEvent â”‚
â”‚ TId=string          â”‚ TId=string           â”‚ TId=string          â”‚ TId=string          â”‚
â”‚ SState=AccountPayloadâ”‚ SState=WorkspaceStateâ”‚ SState=ModuleState â”‚ SState=EntityState â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ³›å‹ç¸®å¯«æ¸…å–®ï¼š
T = Type/Eventå‹åˆ¥
I = IDå‹åˆ¥
S = Stateå‹åˆ¥
P = Payloadå‹åˆ¥ï¼ˆTEvent.payloadï¼‰
E = Element / Event
K = Key
V = Value


ğŸ”¹ èªªæ˜
AggregateRoot æ˜¯æ³›å‹æ ¸å¿ƒï¼Œå…¶ä»– Aggregate éƒ½ç¹¼æ‰¿å®ƒã€‚
TEvent â†’ æ¯å€‹ Aggregate è‡ªå·±çš„äº‹ä»¶å‹åˆ¥
TId / I â†’ èšåˆ ID å‹åˆ¥çµ±ä¸€ string
SState / S â†’ Aggregate å…§éƒ¨ç‹€æ…‹ï¼Œæ”¯æ´ Snapshot / Replay
Payload / P â†’ äº‹ä»¶æ”œå¸¶çš„è³‡æ–™ï¼Œç”¨æ³›å‹æŒ‡å®š
Element / Eã€K/Vã€Contextâ€¦ â†’ å…¶ä»–æ³›å‹è¼”åŠ©ï¼ŒAdapter / Projection / Repository ä¹Ÿå¯ä»¥å¥—ç”¨

é€™æ¨£ä½ å°±èƒ½ï¼š
ä¸€çœ¼çœ‹æ‡‚æ¯å€‹ Aggregate ç”¨å“ªäº›æ³›å‹
ç†è§£äº‹ä»¶ã€IDã€ç‹€æ…‹çš„è§’è‰²
é–‹ç™¼æ™‚ç›´æ¥å¥—å‹åˆ¥ï¼Œå®Œå…¨ type-safe ğŸ˜

