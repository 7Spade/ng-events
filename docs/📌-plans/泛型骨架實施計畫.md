# æ³›å‹éª¨æ¶å¯¦æ–½è¨ˆç•« (Generic Skeleton Implementation Plan)

## ğŸ“‹ ç›®æ¨™ (Objectives)

æœ¬æ–‡ä»¶æä¾›å®Œæ•´çš„æ³›å‹æ¡†æ¶å¯¦æ–½æŒ‡å—ï¼ŒåŸºæ–¼ `docs/æ³›å‹ç¸®å¯«æ¸…å–®.md` çš„è¦ç¯„ï¼Œå¹«åŠ©é–‹ç™¼è€…å¿«é€Ÿç†è§£å’Œå¯¦æ–½ ng-events çš„æ³›å‹æ¶æ§‹æ¨¡å¼ã€‚

### æ ¸å¿ƒç›®æ¨™
1. **ä¸€è‡´æ€§ (Consistency)**: ç¢ºä¿æ‰€æœ‰ Aggregate éµå¾ªçµ±ä¸€çš„ T/I/S æ³›å‹æ¨¡å¼
2. **å‹åˆ¥å®‰å…¨ (Type Safety)**: åˆ©ç”¨ TypeScript æ³›å‹æä¾›å®Œæ•´çš„ç·¨è­¯æ™‚æª¢æŸ¥
3. **å¯ç¶­è­·æ€§ (Maintainability)**: é€éæ¸…æ™°çš„æ³›å‹çµæ§‹é™ä½èªçŸ¥è² æ“”
4. **å¯æ“´å±•æ€§ (Scalability)**: æ”¯æ´æ–°é ˜åŸŸæ¨¡å‹çš„å¿«é€Ÿé–‹ç™¼

---

## ğŸ¯ æ ¸å¿ƒæ³›å‹æ¨¡å¼ (Core Generic Pattern)

### T/I/S ä¸‰å…ƒçµ„æ¨¡å¼

```typescript
AggregateRoot<TEvent, TId, TState>
```

| æ³›å‹åƒæ•¸ | ç¸®å¯« | å«ç¾© | ç¯„ä¾‹ |
|---------|------|------|------|
| `TEvent` | T | Event Type - èšåˆè™•ç†çš„äº‹ä»¶å‹åˆ¥ | `AccountEvent` |
| `TId` | I | ID Type - èšåˆå”¯ä¸€è­˜åˆ¥å‹åˆ¥ | `string` |
| `TState` | S | State Type - èšåˆå…§éƒ¨ç‹€æ…‹å‹åˆ¥ | `AccountPayload` |

### å®Œæ•´æ³›å‹ç¸®å¯«æ¸…å–®

| ç¸®å¯« | å«ç¾© | ç”¨é€” | ç¯„ä¾‹ |
|------|------|------|------|
| T | Type/Event | é€šç”¨å‹åˆ¥æˆ–äº‹ä»¶å‹åˆ¥ | `TEvent` |
| I | ID/Identifier | å”¯ä¸€è­˜åˆ¥ç¬¦å‹åˆ¥ | `TId` |
| S | State/Snapshot | ç‹€æ…‹æˆ–å¿«ç…§å‹åˆ¥ | `TState` |
| P | Payload/Parameter | è² è¼‰æˆ–åƒæ•¸å‹åˆ¥ | `TPayload` |
| E | Element/Event | å…ƒç´ æˆ–äº‹ä»¶å‹åˆ¥ | `TElement` |
| K | Key | ç‰©ä»¶éµå‹åˆ¥ | `K extends keyof T` |
| V | Value | ç‰©ä»¶å€¼å‹åˆ¥ | `V = T[K]` |
| R | Result/Return | è¿”å›å€¼å‹åˆ¥ | `TReturn` |
| C | Context/Config | ç’°å¢ƒæˆ–é…ç½®å‹åˆ¥ | `TContext` |
| A | Args/Array | åƒæ•¸æˆ–é™£åˆ—å‹åˆ¥ | `TArgs` |
| U | Union/UpperBound | è¯åˆæˆ–ä¸Šç•Œå‹åˆ¥ | `T extends U` |
| M | Map/Metadata | æ˜ å°„æˆ–å…ƒè³‡æ–™å‹åˆ¥ | `TMetadata` |
| X | Exception/Extra | ç•°å¸¸æˆ–æ“´å±•å‹åˆ¥ | `TExtra` |
| F | Function/Factory | å‡½æ•¸æˆ–å·¥å» å‹åˆ¥ | `TFactory` |

---

## ğŸ—ï¸ å¯¦æ–½æ­¥é©Ÿ (Implementation Steps)

### æ­¥é©Ÿ 1: å®šç¾©é ˜åŸŸäº‹ä»¶ (Define Domain Events)

#### 1.1 å‰µå»ºäº‹ä»¶å‹åˆ¥

```typescript
// packages/account-domain/account/events/AccountEvent.ts
import { DomainEvent, CausalityMetadata } from '@ng-events/core-engine';

// å®šç¾©äº‹ä»¶è² è¼‰å‹åˆ¥ (ä½¿ç”¨ P = Payload)
export interface AccountCreatedPayload {
  email: string;
  displayName: string;
  photoURL?: string;
}

// å®šç¾©å…·é«”äº‹ä»¶ (ä½¿ç”¨ DomainEvent<TPayload, TId, TMetadata>)
export interface AccountCreated extends DomainEvent<
  AccountCreatedPayload,  // TPayload
  string,                 // TId
  CausalityMetadata      // TMetadata
> {
  eventType: 'AccountCreated';
  aggregateType: 'Account';
}

// è¯åˆæ‰€æœ‰äº‹ä»¶å‹åˆ¥ (ä½¿ç”¨ U = Union)
export type AccountEvent = AccountCreated | AccountUpdated | AccountDeleted;
```

#### 1.2 äº‹ä»¶å‘½åè¦ç¯„

- âœ… ä½¿ç”¨éå»å¼å‹•è©: `AccountCreated`, `PaymentProcessed`
- âœ… æ˜ç¢ºèªæ„: `WorkspaceInvitationSent` è€Œé `InviteSent`
- âŒ é¿å…é€šç”¨åç¨±: `Updated`, `Changed`

### æ­¥é©Ÿ 2: å®šç¾©èšåˆç‹€æ…‹ (Define Aggregate State)

#### 2.1 å‰µå»ºç‹€æ…‹å‹åˆ¥

```typescript
// packages/account-domain/account/types/AccountState.ts

// ä½¿ç”¨ S = State å®šç¾©èšåˆå…§éƒ¨ç‹€æ…‹
export interface AccountState {
  id: string;
  email: string;
  displayName: string;
  photoURL?: string;
  createdAt: Timestamp;
  updatedAt: Timestamp;
  isActive: boolean;
}

// æˆ–ä½¿ç”¨ Payload ä½œç‚º State (é©ç”¨æ–¼ç°¡å–®èšåˆ)
export type AccountPayload = AccountState;
```

#### 2.2 ç‹€æ…‹è¨­è¨ˆåŸå‰‡

- âœ… åªåŒ…å«é‡å»ºèšåˆæ‰€éœ€çš„æœ€å°è³‡æ–™
- âœ… ä½¿ç”¨ä¸å¯è®Šè³‡æ–™çµæ§‹
- âœ… é¿å…å†—é¤˜è³‡æ–™
- âŒ ä¸è¦åŒ…å«è¨ˆç®—å±¬æ€§ï¼ˆä½¿ç”¨ getterï¼‰

### æ­¥é©Ÿ 3: å¯¦æ–½èšåˆæ ¹ (Implement Aggregate Root)

#### 3.1 åŸºæœ¬å¯¦æ–½æ¨¡æ¿

```typescript
// packages/account-domain/account/aggregates/Account.ts
import { AggregateRoot } from '@ng-events/core-engine';
import { AccountEvent } from '../events/AccountEvent';
import { AccountState } from '../types/AccountState';

// ä½¿ç”¨ T/I/S æ¨¡å¼æ“´å±• AggregateRoot
export class Account extends AggregateRoot<
  AccountEvent,   // TEvent
  string,         // TId
  AccountState    // TState
> {
  // èšåˆè­˜åˆ¥ç¬¦ (å¿…é ˆå¯¦ä½œ)
  readonly id: string;
  
  // èšåˆå‹åˆ¥åç¨± (å¿…é ˆå¯¦ä½œ)
  readonly type = 'Account';

  // ç§æœ‰å»ºæ§‹å­ - å¼·åˆ¶ä½¿ç”¨å·¥å» æ–¹æ³•
  private constructor(id: string) {
    super();
    this.id = id;
  }

  // å·¥å» æ–¹æ³• - å‰µå»ºæ–°èšåˆ
  static create(params: {
    id: string;
    email: string;
    displayName: string;
    photoURL?: string;
  }): Account {
    const account = new Account(params.id);
    
    // ç™¼èµ·é ˜åŸŸäº‹ä»¶ (ä½¿ç”¨ raiseEvent)
    account.raiseEvent({
      id: generateEventId(),
      aggregateId: params.id,
      aggregateType: 'Account',
      eventType: 'AccountCreated',
      data: {
        email: params.email,
        displayName: params.displayName,
        photoURL: params.photoURL,
      },
      metadata: createCausalityMetadata({
        causedBy: 'system',
        causedByUser: params.id,
        causedByAction: 'account.create',
      }),
    });

    return account;
  }

  // å¾äº‹ä»¶é‡å»º - äº‹ä»¶æº¯æºæ¨¡å¼
  static fromEvents(id: string, events: AccountEvent[]): Account {
    const account = new Account(id);
    account.replay(events);
    return account;
  }

  // æ‡‰ç”¨äº‹ä»¶é‚è¼¯ (å¿…é ˆå¯¦ä½œ)
  protected applyEvent(event: AccountEvent): void {
    switch (event.eventType) {
      case 'AccountCreated':
        this.applyAccountCreated(event);
        break;
      case 'AccountUpdated':
        this.applyAccountUpdated(event);
        break;
      // ... å…¶ä»–äº‹ä»¶è™•ç†
    }
  }

  // å…·é«”äº‹ä»¶è™•ç†æ–¹æ³•
  private applyAccountCreated(event: AccountCreated): void {
    this.state = {
      id: event.aggregateId,
      email: event.data.email,
      displayName: event.data.displayName,
      photoURL: event.data.photoURL,
      createdAt: event.metadata.timestamp,
      updatedAt: event.metadata.timestamp,
      isActive: true,
    };
  }

  // é ˜åŸŸè¡Œç‚ºæ–¹æ³•
  updateProfile(params: {
    displayName?: string;
    photoURL?: string;
  }): void {
    // é©—è­‰æ¥­å‹™è¦å‰‡
    if (!this.state?.isActive) {
      throw new Error('Cannot update inactive account');
    }

    // ç™¼èµ·æ›´æ–°äº‹ä»¶
    this.raiseEvent({
      id: generateEventId(),
      aggregateId: this.id,
      aggregateType: 'Account',
      eventType: 'AccountUpdated',
      data: params,
      metadata: createCausalityMetadata({
        causedBy: this.getLastEventId(),
        causedByUser: this.id,
        causedByAction: 'account.updateProfile',
      }),
    });
  }

  // Getter æ–¹æ³• - åªè®€è¨ªå•
  get email(): string | undefined {
    return this.state?.email;
  }

  get displayName(): string | undefined {
    return this.state?.displayName;
  }

  get isActive(): boolean {
    return this.state?.isActive ?? false;
  }
}
```

#### 3.2 èšåˆå¯¦æ–½æª¢æŸ¥æ¸…å–®

- [ ] å®šç¾©æ‰€æœ‰äº‹ä»¶å‹åˆ¥ (TEvent)
- [ ] å®šç¾©ç‹€æ…‹å‹åˆ¥ (TState)
- [ ] å¯¦ä½œ `id` å’Œ `type` å±¬æ€§
- [ ] å¯¦ä½œ `applyEvent` æ–¹æ³•
- [ ] å‰µå»ºå·¥å» æ–¹æ³• (`create`, `fromEvents`)
- [ ] å¯¦æ–½é ˜åŸŸè¡Œç‚ºæ–¹æ³•
- [ ] æ·»åŠ æ¥­å‹™è¦å‰‡é©—è­‰
- [ ] æä¾›åªè®€ getter
- [ ] ç§æœ‰å»ºæ§‹å­å¼·åˆ¶ä½¿ç”¨å·¥å» æ–¹æ³•

### æ­¥é©Ÿ 4: å¯¦æ–½å€‰å„² (Implement Repository)

#### 4.1 å€‰å„²ä»‹é¢

```typescript
// packages/core-engine/repositories/Repository.ts

// ä½¿ç”¨æ³›å‹ Repository<TAggregate>
export interface Repository<
  TAggregate extends AggregateRoot
> {
  save(aggregate: TAggregate): Promise<void>;
  load(id: string): Promise<TAggregate | null>;
  delete(id: string): Promise<void>;
}
```

#### 4.2 å…·é«”å€‰å„²å¯¦ä½œ

```typescript
// packages/account-domain/account/repositories/AccountRepository.ts
import { Repository } from '@ng-events/core-engine';
import { Account } from '../aggregates/Account';

export interface AccountRepository extends Repository<Account> {
  // å¯æ·»åŠ é ˜åŸŸç‰¹å®šæŸ¥è©¢
  findByEmail(email: string): Promise<Account | null>;
}
```

### æ­¥é©Ÿ 5: æ•´åˆå¹³å°é©é…å™¨ (Platform Adapter Integration)

#### 5.1 Firestore é©é…å™¨

```typescript
// packages/platform-adapters/firestore/FirestoreAccountRepository.ts
import { AccountRepository } from '@ng-events/account-domain';
import { EventStore } from '@ng-events/core-engine';

export class FirestoreAccountRepository implements AccountRepository {
  constructor(private eventStore: EventStore) {}

  async save(account: Account): Promise<void> {
    const events = account.getUncommittedEvents();
    
    // å„²å­˜äº‹ä»¶åˆ° EventStore
    for (const event of events) {
      await this.eventStore.append(event);
    }
    
    // æ¸…é™¤æœªæäº¤äº‹ä»¶
    account.clearUncommittedEvents();
  }

  async load(id: string): Promise<Account | null> {
    // å¾ EventStore è¼‰å…¥äº‹ä»¶
    const events = await this.eventStore.load(id);
    
    if (events.length === 0) {
      return null;
    }
    
    // å¾äº‹ä»¶é‡å»ºèšåˆ
    return Account.fromEvents(id, events as AccountEvent[]);
  }

  async findByEmail(email: string): Promise<Account | null> {
    // å¯¦ä½œé ˜åŸŸç‰¹å®šæŸ¥è©¢é‚è¼¯
    // é€šå¸¸ä½¿ç”¨æŠ•å½±æˆ–å¿«ç…§æŸ¥è©¢
  }
}
```

### æ­¥é©Ÿ 6: UI å±¤æ•´åˆ (UI Integration)

#### 6.1 Angular æŒ‡ä»¤èª¿åº¦ (Command Dispatch)

```typescript
// packages/ui-angular/src/app/account/services/account.service.ts
import { Injectable } from '@angular/core';
import { AccountRepository } from '@ng-events/account-domain';

@Injectable({ providedIn: 'root' })
export class AccountService {
  constructor(private accountRepository: AccountRepository) {}

  async createAccount(params: {
    email: string;
    displayName: string;
  }): Promise<void> {
    // å‰µå»ºèšåˆ
    const account = Account.create({
      id: generateId(),
      email: params.email,
      displayName: params.displayName,
    });

    // æŒä¹…åŒ–
    await this.accountRepository.save(account);
  }

  async updateProfile(
    accountId: string,
    params: { displayName?: string; photoURL?: string }
  ): Promise<void> {
    // è¼‰å…¥èšåˆ
    const account = await this.accountRepository.load(accountId);
    if (!account) {
      throw new Error('Account not found');
    }

    // åŸ·è¡Œé ˜åŸŸè¡Œç‚º
    account.updateProfile(params);

    // æŒä¹…åŒ–
    await this.accountRepository.save(account);
  }
}
```

---

## ğŸ¨ é€²éšæ¨¡å¼ (Advanced Patterns)

### Saga æ¨¡å¼ - è·¨èšåˆå”èª¿

```typescript
// packages/core-engine/saga/Saga.ts

export abstract class Saga<
  TEvent extends DomainEvent,  // è™•ç†çš„äº‹ä»¶å‹åˆ¥
  TAggregateId = string,       // èšåˆ ID å‹åˆ¥
  TState = unknown             // Saga ç‹€æ…‹å‹åˆ¥
> {
  protected state?: TState;

  abstract handleEvent(event: TEvent): Promise<void>;
  
  protected abstract applyEvent(event: TEvent): void;
}
```

### æŠ•å½±å»ºæ§‹å™¨ (Projection Builder)

```typescript
// ä½¿ç”¨æ³›å‹å»ºç«‹ä¸åŒå‹åˆ¥çš„æŠ•å½±
export class ProjectionBuilder<
  TEvent extends DomainEvent,
  TViewModel
> {
  constructor(
    private initialState: TViewModel,
    private handlers: Map<string, (state: TViewModel, event: TEvent) => TViewModel>
  ) {}

  build(events: TEvent[]): TViewModel {
    return events.reduce(
      (state, event) => {
        const handler = this.handlers.get(event.eventType);
        return handler ? handler(state, event) : state;
      },
      this.initialState
    );
  }
}
```

---

## âš ï¸ å¸¸è¦‹é™·é˜±èˆ‡è§£æ±ºæ–¹æ¡ˆ (Common Pitfalls)

### é™·é˜± 1: ç‹€æ…‹å¤–æ´©

âŒ **éŒ¯èª¤åšæ³•**
```typescript
class Account extends AggregateRoot {
  // ç›´æ¥æš´éœ²å¯è®Šç‹€æ…‹
  state: AccountState;
  
  getState(): AccountState {
    return this.state; // å¯ä»¥è¢«å¤–éƒ¨ä¿®æ”¹ï¼
  }
}
```

âœ… **æ­£ç¢ºåšæ³•**
```typescript
class Account extends AggregateRoot {
  protected state?: AccountState; // protected ä¿è­·
  
  // åªæä¾›åªè®€è¨ªå•
  get email(): string | undefined {
    return this.state?.email;
  }
}
```

### é™·é˜± 2: éºæ¼å› æœå…ƒè³‡æ–™

âŒ **éŒ¯èª¤åšæ³•**
```typescript
account.raiseEvent({
  eventType: 'AccountCreated',
  data: { email, displayName },
  metadata: {}, // ç¼ºå°‘å› æœè³‡è¨Šï¼
});
```

âœ… **æ­£ç¢ºåšæ³•**
```typescript
account.raiseEvent({
  eventType: 'AccountCreated',
  data: { email, displayName },
  metadata: createCausalityMetadata({
    causedBy: 'system',
    causedByUser: userId,
    causedByAction: 'account.create',
    timestamp: Timestamp.now(),
    blueprintId: currentBlueprint,
  }),
});
```

### é™·é˜± 3: åœ¨å»ºæ§‹å­ä¸­åŸ·è¡Œæ¥­å‹™é‚è¼¯

âŒ **éŒ¯èª¤åšæ³•**
```typescript
class Account extends AggregateRoot {
  constructor(email: string, displayName: string) {
    super();
    this.raiseEvent(...); // å»ºæ§‹å­ä¸­ç™¼èµ·äº‹ä»¶ï¼
  }
}
```

âœ… **æ­£ç¢ºåšæ³•**
```typescript
class Account extends AggregateRoot {
  private constructor(id: string) {
    super();
    this.id = id;
  }
  
  static create(params: CreateParams): Account {
    const account = new Account(params.id);
    account.raiseEvent(...); // å·¥å» æ–¹æ³•ä¸­ç™¼èµ·äº‹ä»¶
    return account;
  }
}
```

---

## ğŸ§ª æ¸¬è©¦ç­–ç•¥ (Testing Strategy)

### å–®å…ƒæ¸¬è©¦ - èšåˆè¡Œç‚º

```typescript
describe('Account Aggregate', () => {
  it('should create account with valid data', () => {
    // Arrange
    const params = {
      id: 'acc-123',
      email: 'user@example.com',
      displayName: 'Test User',
    };

    // Act
    const account = Account.create(params);

    // Assert
    const events = account.getUncommittedEvents();
    expect(events).toHaveLength(1);
    expect(events[0].eventType).toBe('AccountCreated');
    expect(events[0].data.email).toBe(params.email);
    expect(account.email).toBe(params.email);
  });

  it('should replay events correctly', () => {
    // Arrange
    const events: AccountEvent[] = [
      {
        id: 'evt-1',
        aggregateId: 'acc-123',
        aggregateType: 'Account',
        eventType: 'AccountCreated',
        data: { email: 'user@example.com', displayName: 'Test User' },
        metadata: createTestMetadata(),
      },
    ];

    // Act
    const account = Account.fromEvents('acc-123', events);

    // Assert
    expect(account.email).toBe('user@example.com');
    expect(account.displayName).toBe('Test User');
  });
});
```

### æ•´åˆæ¸¬è©¦ - å€‰å„²

```typescript
describe('AccountRepository', () => {
  let repository: AccountRepository;
  let eventStore: EventStore;

  beforeEach(() => {
    eventStore = new InMemoryEventStore();
    repository = new FirestoreAccountRepository(eventStore);
  });

  it('should save and load account', async () => {
    // Arrange
    const account = Account.create({
      id: 'acc-123',
      email: 'user@example.com',
      displayName: 'Test User',
    });

    // Act
    await repository.save(account);
    const loaded = await repository.load('acc-123');

    // Assert
    expect(loaded).not.toBeNull();
    expect(loaded!.email).toBe('user@example.com');
  });
});
```

---

## ğŸ“¦ Clean Architecture ä¾è³´æµ (Dependency Flow)

```
core-engine (æ³›å‹æ¡†æ¶)
    â†‘
    â”‚ extends
    â”‚
account-domain / saas-domain (é ˜åŸŸå¯¦ä½œ)
    â†‘
    â”‚ implements
    â”‚
platform-adapters (Firestore, Auth, Projection)
    â†‘
    â”‚ uses
    â”‚
ui-angular (Command Dispatch, ViewModel)
```

### ä¾è³´è¦å‰‡

1. âœ… **å…§å±¤ä¸ä¾è³´å¤–å±¤**: core-engine ä¸ä¾è³´ä»»ä½•é ˜åŸŸæˆ–é©é…å™¨
2. âœ… **é ˜åŸŸç´”æ·¨**: account-domain åªä¾è³´ core-engine
3. âœ… **é©é…å™¨å¯¦ä½œä»‹é¢**: platform-adapters å¯¦ä½œé ˜åŸŸå®šç¾©çš„ä»‹é¢
4. âœ… **UI ç·¨æ’**: ui-angular ç·¨æ’é ˜åŸŸé‚è¼¯ä½†ä¸åŒ…å«æ¥­å‹™è¦å‰‡
5. âŒ **æ°¸ä¸å€’æµ**: å¤–å±¤å¯ä¾è³´å…§å±¤ï¼Œå…§å±¤æ°¸ä¸ä¾è³´å¤–å±¤

---

## ğŸš€ å¿«é€Ÿé–‹å§‹ç¯„ä¾‹ (Quick Start Example)

### å‰µå»ºæ–°èšåˆçš„å®Œæ•´æµç¨‹

1. **å®šç¾©äº‹ä»¶å‹åˆ¥** (`events/TaskEvent.ts`)
2. **å®šç¾©ç‹€æ…‹å‹åˆ¥** (`types/TaskState.ts`)
3. **å¯¦æ–½èšåˆ** (`aggregates/Task.ts`)
4. **å¯¦æ–½å€‰å„²ä»‹é¢** (`repositories/TaskRepository.ts`)
5. **å¯¦æ–½é©é…å™¨** (`platform-adapters/firestore/FirestoreTaskRepository.ts`)
6. **æ•´åˆ UI** (`ui-angular/task/services/task.service.ts`)
7. **ç·¨å¯«æ¸¬è©¦** (`aggregates/Task.spec.ts`)

è©³ç´°æ¨¡æ¿è«‹åƒè€ƒ `docs/ğŸ§¬-Generic/` ç›®éŒ„ä¸­çš„ç¯„æœ¬æª”æ¡ˆã€‚

---

## ğŸ“š ç›¸é—œè³‡æº (Related Resources)

- [æ³›å‹ç¸®å¯«æ¸…å–®](../æ³›å‹ç¸®å¯«æ¸…å–®.md) - å®Œæ•´çš„æ³›å‹ç¸®å¯«å®šç¾©å’Œå°ç…§åœ–
- [Quick Reference](../ğŸ§¬-Generic/Quick-Reference(å¿«é€Ÿåƒè€ƒ).md) - å¿«é€Ÿåƒè€ƒæŒ‡å—
- [Code Templates](../ğŸ§¬-Generic/) - å¯é‡ç”¨çš„ç¨‹å¼ç¢¼éª¨æ¶ç¯„æœ¬
- [Event Sourcing Patterns](../04-core-model/01-Event-Sourcing/01-Core-Principles(æ ¸å¿ƒåŸå‰‡).md) - äº‹ä»¶æº¯æºæ ¸å¿ƒåŸå‰‡
- [Causality Metadata](../04-core-model/03-Causality/) - å› æœè¿½è¹¤æ©Ÿåˆ¶

---

## ğŸ¯ æˆåŠŸæª¢æŸ¥æ¸…å–® (Success Checklist)

å®Œæˆå¯¦æ–½å¾Œï¼Œè«‹ç¢ºèªä»¥ä¸‹é …ç›®ï¼š

- [ ] æ‰€æœ‰èšåˆéµå¾ª `AggregateRoot<TEvent, TId, TState>` æ¨¡å¼
- [ ] äº‹ä»¶åŒ…å«å®Œæ•´çš„å› æœå…ƒè³‡æ–™ (causedBy, causedByUser, causedByAction)
- [ ] ä½¿ç”¨å·¥å» æ–¹æ³•å‰µå»ºèšåˆå¯¦ä¾‹
- [ ] ç§æœ‰å»ºæ§‹å­é˜²æ­¢ç›´æ¥å¯¦ä¾‹åŒ–
- [ ] `applyEvent` æ–¹æ³•è™•ç†æ‰€æœ‰äº‹ä»¶å‹åˆ¥
- [ ] ç‹€æ…‹é€šé getter åªè®€è¨ªå•
- [ ] å€‰å„²å¯¦ä½œä½¿ç”¨ EventStore é€²è¡ŒæŒä¹…åŒ–
- [ ] å®Œæ•´çš„å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡ (â‰¥ 85%)
- [ ] æ•´åˆæ¸¬è©¦é©—è­‰ç«¯åˆ°ç«¯æµç¨‹
- [ ] éµå¾ª Clean Architecture ä¾è³´è¦å‰‡
- [ ] æ–‡ä»¶æ›´æ–°ä¸¦é€£çµåˆ°å°èˆªç³»çµ±

---

## ğŸ“ æ”¯æ´èˆ‡åé¥‹ (Support & Feedback)

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹ï¼š
- æŸ¥é–± [FILE-INDEX.md](../../FILE-INDEX.md) å°‹æ‰¾ç›¸é—œæ–‡ä»¶
- åƒè€ƒ [QUICK-START.md](../../QUICK-START.md) å¿«é€Ÿä¸Šæ‰‹æŒ‡å—
- æäº¤ Issue æˆ– PR æ”¹é€²æœ¬æ–‡ä»¶

---

**æœ€å¾Œæ›´æ–°**: 2026-01-02  
**ç‰ˆæœ¬**: 1.0.0  
**ç¶­è­·è€…**: ng-events æ ¸å¿ƒåœ˜éšŠ

// END OF FILE
