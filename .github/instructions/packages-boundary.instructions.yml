---
description: "Enforce strict boundaries between packages and maintain clean dependency flow."
applyTo: "packages/**"
---

# Packages Boundary Rules

## ç›®æ¨™
- ç¢ºä¿ packages çš„ä¾è³´æ–¹å‘æ˜ç¢º
- ä¿è­·æ ¸å¿ƒ domain / engine ä¸è¢« SDK / UI ç¶æ¶
- æå‡æ¸¬è©¦ã€æ›¿æ›å’Œç¶­è­·å¯è¡Œæ€§

## æ¨è–¦çµæ§‹ï¼ˆåƒè€ƒæœ€çµ‚ç©©å®šç‰ˆï¼‰

```

packages/
â”œâ”€â”€ core-engine/       # ğŸ’ ç´”æ ¸å¿ƒï¼ˆdomain + portsï¼‰
â”œâ”€â”€ saas-domain/       # ğŸ¢ æ¥­å‹™æ¨¡çµ„ï¼ˆåªä¾è³´ core-engineï¼‰
â”œâ”€â”€ platform-adapters/ # ğŸ”§ æŠ€è¡“å¯¦ä½œï¼ˆSDK å…¨éƒ¨é›†ä¸­ï¼‰
â””â”€â”€ ui-angular/        # ğŸ’… å‰ç«¯ç•«é¢ï¼Œåªå‘¼å«æ ¸å¿ƒ

```

## éµå‰‡ä¾è³´æ–¹å‘

```

ui-angular
â†“
platform-adapters
â†“
core-engine (ports + domain)

```

### æ°¸é ç¦æ­¢

- core-engine import Firebase / Angular / AI SDK
- saas-domain import platform-adapters
- adapter å½¼æ­¤äº’ç›¸ä¾è³´
- UI ç›´æ¥æ“ä½œ domain internalsï¼ˆåªèƒ½é€é adapter / portï¼‰

## è¨­è¨ˆç†å¿µ

- **SDK å…¨é›†ä¸­**ï¼šplatform-adapters æ˜¯å”¯ä¸€å¯¦ä½œå±¤ï¼Œæ ¸å¿ƒåªä¾è³´ ports
- **èƒ½åŠ›å¯æ›¿æ›**ï¼šport å®šç¾©å°å¤–èƒ½åŠ›ï¼Œå¯¦ä½œå¯ä»¥æ›æ‰ä¸å½±éŸ¿æ ¸å¿ƒ
- **æ ¸å¿ƒå¯ç¨ç«‹æ¸¬è©¦**ï¼šç„¡ UIã€ç„¡é›²ç«¯ä¹Ÿèƒ½è·‘ Event Store / Aggregate / Projection
- **UI / SDK å¯æ›¿æ›**ï¼šæ› Angularã€Firebaseã€AI SDK ä¸å½±éŸ¿ domain

## å»ºè­°é–‹ç™¼å®ˆå‰‡

1. æ ¸å¿ƒå·¥ç¨‹å¸«åªåœ¨ core-engine èˆ‡ saas-domain å·¥ä½œ
2. UI é–‹ç™¼åªèƒ½é€é adapters å‘¼å« domain åŠŸèƒ½
3. æ–° SDK æˆ–å¤–éƒ¨æœå‹™å¿…é ˆåŠ åœ¨ platform-adaptersï¼Œä¸¦ç”¨ port å°å¤–æš´éœ²
4. ä¿®æ”¹æ ¸å¿ƒ domain éœ€éµå®ˆ ports / entity / aggregate çš„åˆ†å±¤è¦å‰‡
