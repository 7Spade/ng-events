---
description: "Guidelines for all packages to enforce clean architecture, strict boundaries, and sequential reasoning in Copilot."
applyTo: "packages/**"
---

# Packages Architecture Instructions

## æ ¸å¿ƒç›®æ¨™
- ä¿æŒ packages ä¾è³´æ–¹å‘æ¸…æ™°
- æ ¸å¿ƒ domain / engine ä¸è¢« SDK / UI ç¶æ¶
- SaaS æ¨¡çµ„åªä¾è³´ core-engine
- UI / adapters åªèƒ½å‘¼å«æ ¸å¿ƒï¼Œä¸ç›´æ¥æ”¹ domain
- æ‰€æœ‰æ±ºç­–èˆ‡è¨­è¨ˆè¦ä½¿ç”¨ Sequential-Thinking + Software-Planning-Tool åˆ†æ­¥æ€è€ƒ

## å»ºè­°çµæ§‹ï¼ˆæœ€çµ‚ç©©å®šç‰ˆï¼‰

```

packages/
â”œâ”€â”€ core-engine/       # ğŸ’ ç´”æ ¸å¿ƒï¼ˆdomain + portsï¼‰
â”œâ”€â”€ saas-domain/       # ğŸ¢ SaaS æ¥­å‹™æ¨¡çµ„ï¼ˆåªä¾è³´ core-engineï¼‰
â”œâ”€â”€ platform-adapters/ # ğŸ”§ æŠ€è¡“å¯¦ä½œï¼ˆSDK å…¨éƒ¨é›†ä¸­ï¼‰
â””â”€â”€ ui-angular/        # ğŸ’… å‰ç«¯ç•«é¢ï¼Œåªå‘¼å«æ ¸å¿ƒ

```

## éµå‰‡ä¾è³´æ–¹å‘

```

ui-angular
â†“
platform-adapters
â†“
core-engine (ports + domain)

```

### æ°¸é ç¦æ­¢

- core-engine import Firebase / Angular / AI SDK
- saas-domain import platform-adapters
- adapter å½¼æ­¤äº’ç›¸ä¾è³´
- UI ç›´æ¥æ“ä½œ domain internalsï¼ˆåªèƒ½é€é adapter / portï¼‰

## Copilot å°å¼•ï¼ˆå¿…é ˆéµå®ˆ Sequential-Thinkingï¼‰

1. **å…ˆåˆ†æ**ç•¶å‰ package çš„è§’è‰²ï¼ˆcore / saas / adapter / UIï¼‰
2. **åˆ¤æ–·ä¾è³´æ–¹å‘**æ˜¯å¦ç¬¦åˆè¦å‰‡
3. **æ‹†è§£æ­¥é©Ÿ**ï¼š
   - Step 1: åˆ—å‡º package å…§æ‰€æœ‰æ¨¡çµ„ã€portsã€entities
   - Step 2: åˆ—å‡ºå°å¤– import / export
   - Step 3: æª¢æŸ¥æ˜¯å¦æœ‰é•åä¾è³´è¦å‰‡
   - Step 4: å»ºè­°æ”¹æ­£æ–¹æ¡ˆï¼ˆåˆ†æ­¥åˆ—å‡ºï¼‰
4. **ç”Ÿæˆå»ºè­°**å‰ï¼Œå…ˆæ¨¡æ“¬æ¯å€‹ä¾è³´æ”¹å‹•çš„å½±éŸ¿ç¯„åœ
5. **æœ€å¾Œå½¢æˆå®Œæ•´å ±å‘Š**ï¼šæ¯å€‹ package çš„é‚Šç•Œç‹€æ…‹ã€é•è¦é»ã€æ”¹æ­£å»ºè­°

## é–‹ç™¼å®ˆå‰‡

- æ ¸å¿ƒå·¥ç¨‹å¸«åªä¿®æ”¹ core-engine èˆ‡ saas-domain
- UI é–‹ç™¼åªèƒ½é€é adapters å‘¼å« domain åŠŸèƒ½
- æ–° SDK / å¤–éƒ¨æœå‹™å¿…é ˆåŠ å…¥ platform-adaptersï¼Œä¸¦é€é port å°å¤–æš´éœ²
- æ‰€æœ‰è¨­è¨ˆæ±ºç­–å¿…é ˆå…ˆç”¨ Sequential-Thinking æ‹†è§£ï¼Œå†ç”¨ Software-Planning-Tool ç”¢å‡º step-by-step plan
- ç¢ºä¿æ¯å€‹ package çš„ index.ts æ˜¯å”¯ä¸€å°å¤–æš´éœ² API
- ä¿®æ”¹æ ¸å¿ƒ domain éœ€éµå®ˆ ports / entity / aggregate çš„åˆ†å±¤è¦å‰‡
