嘿～這一題就是**總設計師在寫憲法的時刻**了 😼📜
我直接給你一份 **「整個專案可長期使用、不會內鬥、不會走鐘」的命名公約**。
你照這套走，5 年後回來看還是會想親自己一口 💋⚙️

---

# 🧭 全域命名總原則（請刻在牆上）

> **名字要回答問題，而不是描述實作。**

而且只回答其中一個：

* 誰（Account）
* 在哪（Workspace）
* 能不能用（Module）
* 做什麼（Entity / Command）
* 發生了什麼（Event）

---

# 0️⃣ 基本語言規則（全專案通用）

| 項目   | 規則                                                    |
| ---- | ----------------------------------------------------- |
| 語言   | **全英文**                                               |
| 命名風格 | `camelCase`（變數 / 函數）<br>`PascalCase`（型別 / 類別 / Event） |
| 縮寫   | 禁止（`ctx`、`mgr`、`svc` ❌）                               |
| 動詞   | 明確、可唸（`assign` > `set`）                               |
| 否定   | 不用 `notXxx`，用 `isXxx`                                 |

---

# 1️⃣ Account 層命名（誰）

### 🔖 型別

```ts
type AccountId = string;
```

### 🔖 關係

```ts
AccountWorkspaceMembership
AccountOrganizationMembership
```

### 🔖 權限

```ts
WorkspaceRole = 'owner' | 'member' | 'viewer'
```

### 🔖 函數

```ts
assertAccountIsActive()
assertWorkspaceAccess()
canAccessWorkspace()
```

❌ 禁止：

```ts
UserPermission
OrgUser
CurrentUser
```

👉 **Account 永遠是主體，不用 User**

---

# 2️⃣ Workspace 層命名（在哪）

### 🔖 實體

```ts
Workspace
WorkspaceState
WorkspaceId
```

### 🔖 行為（指令）

```ts
CreateWorkspace
EnableWorkspaceModule
ArchiveWorkspace
```

### 🔖 事件（Past Tense）

```ts
WorkspaceCreated
WorkspaceModuleEnabled
WorkspaceArchived
```

### 🔖 狀態欄位

```ts
enabledModules
status
createdAt
```

❌ 禁止：

```ts
Tenant
OrgSpace
ProjectSpace
```

---

# 3️⃣ Module 層命名（能不能用什麼）

### 🔖 Module Key（唯一）

```ts
type ModuleKey = 'task' | 'payment' | 'issue';
```

### 🔖 Manifest

```ts
TaskModuleManifest
PaymentModuleManifest
```

### 🔖 Module Service（唯一對外入口）

```ts
TaskModuleService
PaymentModuleService
```

### 🔖 守門函數

```ts
assertModuleEnabled()
canEnableModule()
```

❌ 禁止：

```ts
TaskManager
PaymentHandler
TaskService  // 沒有 Module 前綴
```

---

# 4️⃣ Entity / Aggregate 命名（做什麼）

### 🔖 Entity

```ts
Task
Payment
Issue
```

### 🔖 Aggregate

```ts
TaskAggregate
PaymentAggregate
```

### 🔖 Aggregate Method（動詞）

```ts
assign()
complete()
approve()
cancel()
```

### 🔖 Command（現在式）

```ts
AssignTask
CompleteTask
ApprovePayment
```

### 🔖 Event（過去式）

```ts
TaskAssigned
TaskCompleted
PaymentApproved
```

❌ 禁止：

```ts
UpdateTask
HandlePayment
DoApprove
```

---

# 5️⃣ Event 命名鐵律（最重要）

### ✅ Event 永遠：

* 過去式
* 已發生
* 不可否認

```ts
TaskAssigned
TaskReassigned
TaskCompleted
```

### ❌ Event 永遠不要：

```ts
TaskAssigning
TaskWillComplete
TryCompleteTask
```

---

# 6️⃣ 函數命名模式（全專案統一）

### 🔥 Assert / Can / Apply 三兄弟

```ts
assertXxx()  // 不合法就 throw
canXxx()     // 回傳 boolean
applyXxx()   // Event → State
```

### 範例

```ts
assertWorkspaceAccess()
canCompleteTask()
applyTaskCompleted()
```

---

# 7️⃣ 資料夾命名規則（避免未來吵架）

```
packages/
├── core-engine/
│   ├── module-system/
│   ├── causality/
│   └── event-store/
│
├── saas-domain/
│   ├── task/
│   │   ├── TaskAggregate.ts
│   │   ├── TaskModuleService.ts
│   │   ├── task.events.ts
│   │   └── task.commands.ts
```

❌ 禁止：

```
utils/
helpers/
common/
shared/
```

（這些是「我懶得想名字」資料夾 😾）

---

# 8️⃣ 絕對禁止清單（請嚴格執法）

❌ 名稱出現這些字：

* manager
* handler
* processor
* helper
* service（沒 Module 前綴）

❌ Entity 出現：

```ts
createdByUserId
ownerUserId
```

✅ 一律：

```ts
actorAccountId
```

---

# 🧠 一句終極總結（這是靈魂）

> **名字不是給編譯器看的，
> 是給「半年後的你」看的。**

你現在這份命名公約
不是在限制團隊
是在**保護未來** 🖤

---

如果你願意，下一步我可以幫你：

* ✨ 把這份公約整理成 `NAMING_CONVENTIONS.md`
* ✨ 幫你檢查現有程式碼哪裡違規
* ✨ 幫你寫 ESLint / TS Rule 強制執行

來嘛～你已經走到這一步了，我會陪你把這套系統「養到不會爛」😼💋
